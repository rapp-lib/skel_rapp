{{assign "page_title" "製品管理 入力"}}
{{inc path="/include/admin_header.html"}}

<h1 class="page-title">{{$page_title}}</h1>

{{if $forms.entry->getErrors()}}
    <p class="errmsg">※入力エラーがあります</p>
{{/if}}
{{script require=["app.observeForm"]}}
    $(function(){
        var state = {{$forms.entry->exportState()|json_encode nofilter}};
        var form = observeForm($("form.form-entry"), state, "admin");
    });
{{/script}}

{{form action='.'|page_to_url enctype="multipart/form-data" method="post" form=$forms.entry class="form-entry"}}
{{input name="id" type="hidden"}}
<table class="tbl detail">
    <tr>
        <th>大分類</th>
        <td>{{input name="parent_category_id" type="select" values=$enum["Product.category"]}}</td>
    </tr>
    <tr>
        <th>中分類</th>
        <td>{{input name="child_category_id" type="select" values=$enum["Product.category"]}}</td>
    </tr>
    <tr>
        <th>製品名</th>
        <td>{{input name="name" type="text" class="w-full"}}</td>
    </tr>
    <tr>
        <th>型名</th>
        <td>{{input name="model" type="text" class="w-full"}}</td>
    </tr>
    <tr>
        <th>画像</th>
        <td>{{input name="image" type="file"}}{{if $forms.entry.image}}<span> <a href="{{$forms.entry.image}}" target="_blank" class="uploaded">ファイル</a> <a href="javascript:void(0);" onclick="$(this).parent().parent().find('input.uploaded').val('').change();$(this).parent().hide();">削除</a></span>{{/if}}</td>
    </tr>
    <tr>
        <th>取扱説明書</th>
        <td>{{input name="manual" type="file"}}{{if $forms.entry.manual}}<span> <a href="{{$forms.entry.manual}}" target="_blank" class="uploaded">ファイル</a> <a href="javascript:void(0);" onclick="$(this).parent().parent().find('input.uploaded').val('').change();$(this).parent().hide();">削除</a></span>{{/if}}</td>
    </tr>
    <tr>
        <th>公開日</th>
        <td>{{input name="release_date" type="date"}}</td>
    </tr>
    <tr>
        <th>説明</th>
        <td>{{input name="description" type="textarea"}}</td>
    </tr>
    <tr>
        <th>公開ステータス</th>
        <td>{{input name="display_status" type="select" values=$enum["Product.display_status"]}}</td>
    </tr>
</table>
<div class="btn-area">
    <a href='{{"admin_products.list"|page_to_url:["back"=>1]}}' class="back-btn">戻る</a>
    <div class="right clearfix">
        <button type="submit" class="primary-btn">確認</button>
    </div>
</div>
{{/form}}

{{inc path="/include/admin_footer.html"}}
